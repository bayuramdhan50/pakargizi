digraph G {
  node [shape=box, style="rounded,filled", fillcolor=lightblue, fontname="Arial"];
  edge [fontname="Arial"];
  
  // Bagian BMI
  start [label="Input: Berat & Tinggi", fillcolor=lightyellow];
  validasi [label="Validasi Input"];
  valid [label="Input Valid"];
  invalid [label="Nilai Tidak Valid", fillcolor=lightpink];
  bmi_calc [label="BMI = Berat/(Tinggi)²"];
  
  bmi_kurang [label="BMI < 18.5\nStatus: Berat Badan Kurang", fillcolor=lightpink];
  bmi_normal [label="18.5 ≤ BMI < 25\nStatus: Berat Badan Normal", fillcolor=lightgreen];
  bmi_berlebih [label="25 ≤ BMI < 30\nStatus: Berat Badan Berlebih", fillcolor=lightsalmon];
  bmi_obesitas [label="BMI ≥ 30\nStatus: Obesitas", fillcolor=tomato];
  
  start -> validasi;
  validasi -> valid [label="Berat ≥ 20kg &\nTinggi ≥ 100cm"];
  validasi -> invalid [label="Berat < 20kg atau\nTinggi < 100cm"];
  valid -> bmi_calc;
  bmi_calc -> bmi_kurang;
  bmi_calc -> bmi_normal;
  bmi_calc -> bmi_berlebih;
  bmi_calc -> bmi_obesitas;
  
  // Bagian Nutrisi
  nutrisi [label="Input: Makanan + Gram", fillcolor=lightyellow];
  nutrisi_loop [label="Untuk setiap nutrisi\n(Kalori, Protein, Lemak,\nKarbohidrat, Serat)"];
  hitung_persen [label="Hitung persentase:\n(Asupan/Kebutuhan) × 100%"];
  
  status_kurang [label="Persentase < 80%\nStatus: KURANG", fillcolor=lightpink];
  status_cukup [label="80% ≤ Persentase ≤ 120%\nStatus: CUKUP", fillcolor=lightgreen];
  status_berlebih [label="Persentase > 120%\nStatus: BERLEBIH", fillcolor=lightsalmon];
  
  // Nutrisi Kalori
  kalori_kurang [label="Nutrisi = Kalori\nStatus: KURANG"];
  kalori_kurang_60 [label="Persentase < 60%", fillcolor=lightpink];
  kalori_kurang_60_100 [label="Persentase ≥ 60%", fillcolor=lightpink];
  
  kalori_berlebih [label="Nutrisi = Kalori\nStatus: BERLEBIH"];
  kalori_berlebih_150 [label="Persentase > 150%", fillcolor=tomato];
  kalori_berlebih_120_150 [label="Persentase ≤ 150%", fillcolor=lightsalmon];
  
  // Nutrisi Protein
  protein_kurang [label="Nutrisi = Protein\nStatus: KURANG"];
  protein_kurang_60 [label="Persentase < 60%", fillcolor=lightpink];
  protein_kurang_60_100 [label="Persentase ≥ 60%", fillcolor=lightpink];
  
  // Evaluasi Status Gizi
  evaluasi [label="Evaluasi Status Gizi", fillcolor=lightyellow];
  hitung_status [label="Hitung jumlah nutrisi per status"];
  
  gizi_kurang [label="Nutrisi 'Kurang' ≥ 2\nStatus: GIZI KURANG", fillcolor=lightpink];
  gizi_berlebih [label="Nutrisi 'Berlebih' ≥ 2\nStatus: GIZI BERLEBIH", fillcolor=lightsalmon];
  gizi_cukup [label="Lainnya\nStatus: GIZI CUKUP", fillcolor=lightgreen];
  
  // Koneksi Nutrisi
  nutrisi -> nutrisi_loop;
  nutrisi_loop -> hitung_persen;
  hitung_persen -> status_kurang;
  hitung_persen -> status_cukup;
  hitung_persen -> status_berlebih;
  
  status_kurang -> kalori_kurang [label="Jika nutrisi = Kalori"];
  kalori_kurang -> kalori_kurang_60;
  kalori_kurang -> kalori_kurang_60_100;
  
  status_kurang -> protein_kurang [label="Jika nutrisi = Protein"];
  protein_kurang -> protein_kurang_60;
  protein_kurang -> protein_kurang_60_100;
  
  status_berlebih -> kalori_berlebih [label="Jika nutrisi = Kalori"];
  kalori_berlebih -> kalori_berlebih_150;
  kalori_berlebih -> kalori_berlebih_120_150;
  
  // Koneksi Evaluasi
  status_kurang -> evaluasi [style=dotted];
  status_cukup -> evaluasi [style=dotted];
  status_berlebih -> evaluasi [style=dotted];
  
  evaluasi -> hitung_status;
  hitung_status -> gizi_kurang;
  hitung_status -> gizi_berlebih;
  hitung_status -> gizi_cukup;
  
  // Ranking untuk layout
  {rank=same; start nutrisi evaluasi}
  {rank=same; validasi nutrisi_loop hitung_status}
  {rank=same; valid invalid hitung_persen}
  {rank=same; bmi_calc status_kurang status_cukup status_berlebih}
  {rank=same; bmi_kurang bmi_normal bmi_berlebih bmi_obesitas}
  {rank=same; kalori_kurang protein_kurang kalori_berlebih}
  {rank=same; gizi_kurang gizi_berlebih gizi_cukup}
  
  label = "Pohon Keputusan Sistem Pakar Gizi";
  fontname = "Arial";
  fontsize = 20;
}
